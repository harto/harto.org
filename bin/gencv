#!/usr/bin/env bash
set -euo pipefail

if (( $# != 2 )); then
  echo "usage: gencv </path/to/markdown> </path/to/pdf>" >&2
  exit 1
fi

markdown=$1
pdf=$2

find_xelatex() {
  find /usr/local -name xelatex | head -n1
}

if ! command -v xelatex &>/dev/null; then
  # assume installed but not on PATH
  export PATH="$(dirname "$(find_xelatex)"):$PATH"
fi

pandoc "$markdown" \
  --pdf-engine=xelatex \
  --variable mainfont=Helvetica \
  --variable urlcolor=NavyBlue \
  -V links-as-notes \
  -o "$pdf"
